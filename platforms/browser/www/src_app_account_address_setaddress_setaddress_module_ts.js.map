{"version":3,"sources":["./src/app/account/address/setaddress/setaddress-routing.module.ts","./src/app/account/address/setaddress/setaddress.module.ts","./src/app/account/address/setaddress/setaddress.page.ts","./src/app/account/address/setaddress/setaddress.page.scss","./src/app/account/address/setaddress/setaddress.page.html"],"names":[],"mappings":"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","file":"src_app_account_address_setaddress_setaddress_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SetaddressPage } from './setaddress.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SetaddressPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SetaddressPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SetaddressPageRoutingModule } from './setaddress-routing.module';\n\nimport { SetaddressPage } from './setaddress.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    SetaddressPageRoutingModule\n  ],\n  declarations: [SetaddressPage]\n})\nexport class SetaddressPageModule {}\n","import { Component, OnInit, NgZone } from '@angular/core';\nimport { LoadingController, NavController, ToastController } from '@ionic/angular';\nimport { ServiceService } from '../../.././service/service.service';\nimport { EventsService } from '../../.././service/events.service';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { NativeGeocoder, NativeGeocoderResult, NativeGeocoderOptions } from '@ionic-native/native-geocoder/ngx';\nimport { NavigationExtras } from '@angular/router';\ndeclare var google;\n\n@Component({\n  selector: 'app-setaddress',\n  templateUrl: './setaddress.page.html',\n  styleUrls: ['./setaddress.page.scss'],\n})\nexport class SetaddressPage implements OnInit {\n\n  data:any;\n  admin:any;\n  searchQuery: any;\n  hasSearch:any;\n  address:any;\n  LocationNow:any;\n  MyLocation = [];\n  GoogleAutocomplete: any;\n  autocomplete: { input: string; };\n  autocompleteItems: any[];\n  lat:any;\n  lng:any;\n\n  constructor(\n    public server: ServiceService,\n    public toastController: ToastController,\n    public geolocation: Geolocation,\n    public nativeGeocoder: NativeGeocoder,\n    public zone: NgZone,\n    public nav: NavController,\n    public loadingController: LoadingController,\n    public events: EventsService,\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter()\n  {   \n    this.admin = JSON.parse(localStorage.getItem('admin'));\n    \n    this.autocomplete = { input: '' };\n    this.searchQuery = null;\n    this.hasSearch   = false;\n    this.autocompleteItems = [];\n    \n    this.loadData(); \n  }\n\n  loadData()\n  {\n    this.server.getAllAdress(localStorage.getItem('user_id')).subscribe((response:any) => {\n      this.address = response.data;\n    });\n\n    // Obtenemos la ubicación actual\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.lat = resp.coords.latitude;\n      this.lng = resp.coords.longitude;\n      this.getAddressFromCoords(resp.coords.latitude, resp.coords.longitude);\n    }).catch((error) => {\n      console.log('Error al obtener la ubicación', error);\n    });\n  }\n\n  getAddressFromCoords(lattitude, longitude) {\n\n    this.server.GeocodeFromCoords(lattitude, longitude,this.admin.ApiKey_google).subscribe((data:any) => {\n      let formatted_address = data.results[0].formatted_address;\n      this.LocationNow = formatted_address;\n      this.MyLocation.push({\n        \"lat\"          : data.results[0].geometry.location.lat,\n        \"lng\"          : data.results[0].geometry.location.lng,\n        \"address\"      : this.LocationNow\n      });\n    });\n   \n  }\n\n  search(ev)\n  {\n    this.GoogleAutocomplete = new google.maps.places.AutocompleteService();\n    \n    var val = ev.target.value;\n    if(val && val.length > 0)\n    {\n      this.data      = null;\n      this.hasSearch = val;\n      if (this.autocomplete.input == '') {\n        this.autocompleteItems = [];\n        return;\n      }\n      this.GoogleAutocomplete.getPlacePredictions({ input: this.autocomplete.input },\n      (predictions, status) => {\n        this.autocompleteItems = [];\n        this.zone.run(() => {\n          predictions.forEach((prediction) => {\n            this.autocompleteItems.push(prediction);\n          });\n        });\n      });\n    }\n    else\n    {\n      this.ngOnInit();\n      this.hasSearch = false;\n    }\n  }\n  \n  clearSearch() {\n    this.searchQuery = null;\n    this.hasSearch   = false;\n    this.autocompleteItems = [];\n  }\n\n  SelectSearchResult(item)\n  {\n   \n\n    var geocoder = new google.maps.Geocoder;\n    let $this = this;\n    let options: NativeGeocoderOptions = {\n      useLocale: true,\n      maxResults: 2\n    };\n\n    geocoder.geocode({'placeId': item.place_id}, function(results, status) {\n      if (status !== 'OK') {\n        window.alert('Geocoder failed due to: ' + status);\n        return;\n      }\n      let navigationExtras: NavigationExtras = {\n        queryParams: {\n          location: JSON.stringify(results[0].geometry.location),\n          address: item.description\n        }\n      };\n  \n      $this.nav.navigateForward(['/address'], navigationExtras);\n      \n    });\n  }\n  \n  removeAddress(id) {\n    this.server.trashAddress(id).subscribe(data => {\n        if (data) {\n          this.presentToast(\"La dirección se ha eliminado...\",'success');\n          this.ionViewWillEnter();\n        }else {\n          this.presentToast(data,'danger');\n        }\n    });\n  }\n\n  async saveAddress(item,type)\n  {\n    const loading = await this.loadingController.create({\n      message: 'Guardando Dirección...',\n    });\n    await loading.present();\n\n    \n    // Cargamos la ciudad\n    var lat = item.lat; //localStorage.getItem(\"current_lat\") ? localStorage.getItem(\"current_lat\") : 0;\n    var lng = item.lng; //localStorage.getItem(\"current_lng\") ? localStorage.getItem(\"current_lng\") : 0;\n\n    this.server.GetNearbyCity(\"&lat=\"+lat+\"&lng=\"+lng).subscribe((response:any) => {\n      \n      if (response.data.nearby == true) {\n        if(localStorage.getItem('user_id') && localStorage.getItem('user_id') != 'null')\n        {\n            localStorage.setItem('city_id',response.data.data[0].id);\n            localStorage.setItem('city_name',response.data.data[0].name);\n\n            this.events.publish('change_city',response.data.data[0].id);\n            this.server.updateCity(\"id=\"+localStorage.getItem('user_id')+\"&city_id=\"+response.data.data[0].id).subscribe(() => {});\n        } \n        else\n        {\n          localStorage.setItem('city_id',response.data.data[0].id);\n          localStorage.setItem('city_name',response.data.data[0].name);\n          this.events.publish('change_city',response.data.data[0].id);\n        }\n        \n        if (type == 'LocationNow') {\n          var allData = {\n            address : item.address,\n            lat : this.lat,\n            lng : this.lng,\n            user_id : localStorage.getItem('user_id')\n          }  \n    \n          this.server.saveAddress(allData).subscribe((response:any) => {\n            if (response.msg == 'done') {\n              localStorage.setItem(\"address\",item.address);\n              localStorage.setItem('address_id',response.id);\n              localStorage.setItem(\"current_lat\",this.lat);\n              localStorage.setItem('current_lng',this.lng);\n            }else {\n              this.presentToast(JSON.stringify(response.data),'danger');  \n            }\n            \n            loading.dismiss();\n            this.nav.navigateForward('home');\n            this.presentToast(\"Dirección guardada con éxito.\",'success');\n            \n          });\n        }else{\n          localStorage.setItem(\"address\",item.address);\n          localStorage.setItem('address_id',item.id);\n          localStorage.setItem(\"current_lat\",item.lat);\n          localStorage.setItem('current_lng',item.lng);\n          \n          loading.dismiss();\n          this.nav.navigateForward('home');\n          this.presentToast(\"Dirección guardada con éxito.\",'success');\n        }\n\n      }else {\n        loading.dismiss();\n        this.presentToast(\"Aún no tenemos servicio en esta ubicación\",'danger');\n      }\n    });\n    \n    \n    \n  }\n\n  async presentToast(txt,color) {\n    const toast = await this.toastController.create({\n      message: txt,\n      duration: 2000,\n      position : 'top',\n      color:color\n    });\n    toast.present();\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzZXRhZGRyZXNzLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title style=\\\"font-size: 17px;font-family: 'SF Pro Display';margin-left: -8px !important;\\\">Detalles de la entrega</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <div class=\\\"searchBar\\\" *ngIf=\\\"autocomplete\\\">\\n    <ion-searchbar style=\\\"font-size: 12px;font-family: 'SF Pro Display';--margin-bottom:0;--margin-top:0;\\\" \\n                  (ionInput)=\\\"search($event)\\\" \\n                  placeholder=\\\"Ingrese una nueva dirección\\\" \\n                  mode=\\\"ios\\\" \\n                  color=\\\"light\\\" \\n                  (ionClear)=\\\"clearSearch()\\\" \\n                  [(ngModel)]=\\\"autocomplete.input\\\">\\n    </ion-searchbar>\\n  </div>\\n\\n  <!-- Search AutoComplete -->\\n  <ion-list *ngIf=\\\"autocompleteItems && hasSearch\\\">\\n    <ion-item *ngFor=\\\"let item of autocompleteItems\\\" tappable (click)=\\\"SelectSearchResult(item)\\\">\\n      <ion-avatar slot=\\\"start\\\">\\n        <ion-icon name=\\\"pin\\\" style=\\\"font-size: 22px;\\\"></ion-icon>\\n      </ion-avatar>\\n      <ion-label>\\n        <h4>{{item.structured_formatting.main_text}}</h4>\\n        <p style=\\\"font-size: 12px;font-family: 'SF Pro Display';\\\" *ngIf=\\\"item.structured_formatting.secondary_text\\\">\\n          {{item.structured_formatting.secondary_text | slice:0:45}} \\n          <i *ngIf=\\\"item.structured_formatting.secondary_text.length > 45\\\">...</i>\\n        </p>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n  <!-- Search AutoComplete -->\\n  \\n  <!-- LocationNow -->\\n  <ion-item *ngIf=\\\"!LocationNow\\\">\\n    <ion-avatar slot=\\\"start\\\">\\n      <ion-icon name=\\\"navigate\\\" style=\\\"font-size: 22px;\\\"></ion-icon>\\n    </ion-avatar>\\n    <ion-label>\\n      <h4>Tu Ubicación</h4>\\n      <p>\\n        <ion-skeleton-text animated style=\\\"width: 100%;height: 15px;\\\"></ion-skeleton-text>\\n      </p>\\n    </ion-label>\\n  </ion-item>\\n\\n  <ion-item *ngIf=\\\"LocationNow && !hasSearch\\\" (click)=\\\"saveAddress(MyLocation[0],'LocationNow')\\\">\\n    <ion-avatar slot=\\\"start\\\">\\n      <ion-icon name=\\\"navigate\\\" style=\\\"font-size: 22px;\\\"></ion-icon>\\n    </ion-avatar>\\n    <ion-label>\\n      <h4>Tu Ubicación</h4>\\n      \\n      <p style=\\\"font-size: 12px;font-family: 'SF Pro Display';\\\">\\n        {{LocationNow | slice:0:45}} <i *ngIf=\\\"LocationNow.length > 45\\\">...</i>\\n      </p>\\n    </ion-label>\\n  </ion-item>\\n  <!-- LocationNow -->\\n\\n  <!-- Save Address -->\\n  <ion-list *ngIf=\\\"!hasSearch\\\">\\n    <ion-item-sliding *ngFor=\\\"let add of address\\\">\\n      <ion-item (click)=\\\"saveAddress(add,0)\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <ion-icon name=\\\"time\\\" style=\\\"font-size: 22px;\\\"></ion-icon>\\n        </ion-avatar>\\n        <ion-label>\\n          <h4 *ngIf=\\\"add.type\\\">{{add.type}}</h4>\\n          <h4 *ngIf=\\\"!add.type\\\">Sin Especificar</h4>\\n          \\n          <p style=\\\"font-size: 12px;font-family: 'SF Pro Display';\\\">\\n            {{add.address | slice:0:45}} <i *ngIf=\\\"add.address.length > 45\\\">...</i>\\n          </p>\\n        </ion-label>\\n      </ion-item>\\n  \\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option color=\\\"danger\\\" (click)=\\\"removeAddress(add.id)\\\">\\n          <ion-icon name=\\\"trash\\\"></ion-icon>\\n          Eliminar\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n  </ion-list>\\n  <!-- Save Address -->\\n\\n</ion-content>\\n<ion-footer>\\n  <ion-button expand=\\\"full\\\" color=\\\"primary\\\" mode=\\\"ios\\\">Guardar</ion-button>\\n</ion-footer>\\n\";"],"sourceRoot":"webpack:///"}